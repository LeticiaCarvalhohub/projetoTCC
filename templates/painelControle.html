<!DOCTYPE html>
<html lang="pt-Br">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tudo no controle</title>
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/painelControle.css') }}"
    />
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/animacoesPainel.css') }}"
    />
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/painelControleRes.css') }}"
    />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  </head>
  <body>
    <!-- Cabeçalho -->
    <header>
      <div class="logo-container">
        <button id="acessoNav">
          <img
            src="{{ url_for('static', filename='assets/icons/menu.svg') }}"
            alt="menu.svg"
          />
        </button>
        <img
          id="logoIcone"
          src="{{ url_for('static', filename='assets/images/logoTdC.png') }}"
          alt="#"
        />
        <h1 id="tituloPrincipal">Tudo no Controle</h1>
      </div>
      <div class="perfilUsuario">
        <span class="nomeUsuario">Bem-vindo - {{ session['usuario'] }}</span>
      </div>
    </header>

    <!-- Barra de navegação -->
    <nav>
      <div class="navSessao">
        <h2 class="navTitulo">Principal</h2>
        <a href="#" class="navLink ativo" data-destino="dashboard">
          <img
            src="{{ url_for('static', filename='assets/icons/dashboard.svg') }}"
            alt="dashboard"
          />
          <span>Dashboard</span>
        </a>
      </div>

      <div class="navSessao">
        <h2 class="navTitulo">Módulos</h2>
        <a href="#" class="navLink" data-destino="compras">
          <img
            src="{{ url_for('static', filename='assets/icons/compras.svg') }}"
            alt="compras.svg"
          />
          <span>Compras</span>
        </a>
        <a href="#" class="navLink" data-destino="vendas">
          <img
            src="{{ url_for('static', filename='assets/icons/vendas.svg') }}"
            alt="vendas.svg"
          />
          <span>Vendas</span>
        </a>
        <a href="#" class="navLink" data-destino="inventario">
          <img
            src="{{ url_for('static', filename='assets/icons/estoque.svg') }}"
            alt="estoque.svg"
          />
          <span>Inventário</span>
        </a>
      </div>

      <div class="navSessao">
        <h2 class="navTitulo">Operacional</h2>
        <a href="#" class="navLink" data-destino="operacoes">
          <img
            src="{{ url_for('static', filename='assets/icons/configuracoes.svg') }}"
            alt="config.svg"
          />
          <span>Configurações</span>
        </a>
      </div>

      <button id="btnLogout">Sair</button>
    </nav>

    <!-- Conteúdo Principal -->
    <main>
      <!-- DashBoard-->
      <section id="dashboard">
        <div class="cabecalhoPagina">
          <h2 class="paginaTitulo">Dashboard</h2>
          <p class="subtitulo">Início / Dashboard</p>
        </div>
        <div class="dashboardGrid">
          <div class="cartao">
            <div class="cabecalhoCartao">
              <h3 class="tituloCartao">Vendas Hoje</h3>
              <div class="iconeCartao">
                <img
                  src="{{ url_for('static', filename='assets/icons/vendas.svg') }}"
                  alt="vendas.svg"
                />
              </div>
            </div>
            <div class="valorCartao">R$ 45.237,89</div>
            <div class="descricaoCartao">+12% em relação a ontem</div>
          </div>
          <div class="cartao">
            <div class="cabecalhoCartao">
              <h3 class="tituloCartao">Pedidos Pendentes</h3>
              <div class="iconeCartao">
                <img
                  src="{{ url_for('static', filename='assets/icons/alerta.svg') }}"
                  alt="alerta.svg"
                />
              </div>
            </div>
            <div class="valorCartao">25</div>
            <div class="descricaoCartao">-2 desde ontem</div>
          </div>
          <div class="cartao">
            <div class="cabecalhoCartao">
              <h3 class="tituloCartao">Novos fornecedores</h3>
              <div class="iconeCartao">
                <img
                  src="{{ url_for('static', filename='assets/icons/pessoas.svg') }}"
                  alt="pessoas.svg"
                />
              </div>
            </div>
            <div class="valorCartao">14</div>
            <div class="descricaoCartao">+7 novos esta semana</div>
          </div>
        </div>

        <div class="dashboardGrid">
          <div class="graficos">
            <canvas id="chartContainer1" class="graficoContainer"></canvas>
          </div>
          <div class="graficos">
            <canvas id="chartContainer2" class="graficoContainer"></canvas>
          </div>
          <div class="graficos">
            <canvas id="chartContainer3" class="graficoContainer"></canvas>
          </div>
        </div>
      </section>

      <!-- Compras -->
      <section id="compras" style="display: none">
        <div id="comprasCabecalho">
          <h2 class="paginaTitulo">Compras</h2>
        </div>

        <div id="controlesCompras">
          <button id="btnAbrirModalCompra" class="botaoPrimario">
            <img
              src="{{ url_for('static', filename='assets/icons/novo.svg') }}"
              alt="novo.svg"
            />Nova Compra
          </button>
          <div class="filtrarOpcoes">
            <select class="filtroSelecionar">
              <option value="">Todos os status</option>
              <option value="pendente">Pendente</option>
              <option value="recebido">Recebido</option>
              <option value="cancelado">Cancelado</option>
            </select>
          </div>
        </div>

        <table id="tabelaCompras">
          <thead>
            <tr class="tabelaCabecalho">
              <th>Código</th>
              <th>Fornecedor</th>
              <th>Data</th>
              <th>Itens</th>
              <th>Total (R$)</th>
              <th>Status</th>
              <th>Ações</th>
            </tr>
          </thead>
          <tbody id="listaCompras">
            <tr class="linhaTabela">
              <td class="tabelaColuna">PROD001</td>
              <td class="tabelaColuna">Empresa Cardoso</td>
              <td class="tabelaColuna">20/06/2026</td>
              <td class="tabelaColuna">10 linhas</td>
              <td>R$9.000</td>
              <td class="tabelaColuna">
                <span class="itemEstado emEstoque">Recebido</span>
              </td>
              <td class="tabelaColuna acoes">
                <button class="botoesDecisao" title="Editar">
                  <img
                    src="{{ url_for('static', filename='assets/icons/editar.svg') }}"
                    alt="editar.svg"
                  />
                </button>
                <button class="botoesDecisao" title="Excluir">
                  <img
                    src="{{ url_for('static', filename='assets/icons/lixeira.svg') }}"
                    alt="lixeira.svg"
                  />
                </button>
              </td>
            </tr>
          </tbody>
        </table>
      </section>

      <!-- Vendas -->
      <section id="vendas" style="display: none">
        <div id="vendasCabecalho">
          <div id="caixaVendas">
            <h2 class="paginaTitulo">Vendas</h2>
            <div id="vendasSumario">
              <div class="sumarioEstado total">
                <span>Total Vendido Hoje</span>
                <strong>R$ 1.250,00</strong>
              </div>
              <div class="sumarioEstado realizadas">
                <span>Vendas Realizadas</span>
                <strong>287 vendas</strong>
              </div>
              <div class="sumarioEstado alerta">
                <span>Fiado Pendente</span>
                <strong>R$ 320,00</strong>
              </div>
            </div>
          </div>
        </div>

        <div id="controlesVendas">
          <button id="btnAbrirModalVenda" class="botaoPrimario">
            <img
              src="{{ url_for('static', filename='assets/icons/novo.svg') }}"
              alt="novo.svg"
            />Nova Venda
          </button>
          <div class="filtrarOpcoes">
            <select class="filtroSelecionar">
              <option value="">Todos os pagamentos</option>
              <option value="dinheiro">Dinheiro</option>
              <option value="cartao">Cartão</option>
              <option value="pix">PIX</option>
              <option value="fiado">Fiado</option>
            </select>
          </div>
          <div class="filtrarOpcoes">
            <select class="filtroSelecionar">
              <option value="">Todos os status</option>
              <option value="pendente">Pago</option>
              <option value="recebido">Pendente</option>
              <option value="cancelado">Cancelado</option>
            </select>
          </div>
        </div>

        <h3 class="tituloTabela">Vendas Registradas</h3>
        <table id="tabelaCompras">
          <thead>
            <tr class="tabelaCabecalho">
              <th>Código</th>
              <th>Fornecedor</th>
              <th>Data</th>
              <th>Itens</th>
              <th>Total (R$)</th>
              <th>Status</th>
              <th>Ações</th>
            </tr>
          </thead>
          <tbody id="listaCompras">
            <tr class="linhaTabela">
              <td class="tabelaColuna">PROD001</td>
              <td class="tabelaColuna">Empresa Cardoso</td>
              <td class="tabelaColuna">20/06/2026</td>
              <td class="tabelaColuna">10 linhas</td>
              <td>R$9.000</td>
              <td class="tabelaColuna">
                <span class="itemEstado emEstoque">Recebido</span>
              </td>
              <td class="tabelaColuna acoes">
                <button class="botoesDecisao" title="Editar">
                  <img
                    src="{{ url_for('static', filename='assets/icons/editar.svg') }}"
                    alt="editar.svg"
                  />
                </button>
                <button class="botoesDecisao" title="Excluir">
                  <img
                    src="{{ url_for('static', filename='assets/icons/lixeira.svg') }}"
                    alt="lixeira.svg"
                  />
                </button>
              </td>
            </tr>
          </tbody>
        </table>
      </section>

      <!-- Estoque -->
      <section id="inventario" style="display: none">
        <div id="inventarioCabecalho">
          <div id="caixaInventario">
            <h2 class="paginaTitulo">Inventário</h2>
            <div id="inventarioSumario">
              <div class="sumarioEstado total">
                <span>Produtos Totais</span>
                <strong id="totalQuant"></strong>
              </div>
              <div class="sumarioEstado alerta">
                <span>Baixo Estoque (&lt; 30)</span>
                <strong id="baixoEstoq"></strong>
              </div>
              <div class="sumarioEstado perigo">
                <span>Sem Estoque</span>
                <strong id="semEstoq"></strong>
              </div>
            </div>
          </div>
        </div>

        <div id="controlesInventario">
          <button id="btnAbrirModalEstoque" class="botaoPrimario">
            <img
              src="{{ url_for('static', filename='assets/icons/novo.svg') }}"
              alt="novo.svg"
            />Novos produtos
          </button>

          <div class="filtrarOpcoes">
            <label for="filtroTipo">Filtrar por tipo:</label>
            <select id="filtroTipo" class="filtroSelecionar">
              <option value="">Todos</option>
              <option value="linha">Linha</option>
              <option value="tecido">Tecido</option>
              <option value="extra">Extra</option>
            </select>
          </div>
        </div>

        <h3 class="tituloTabela">Tabela dos produtos</h3>
        <table id="tabelaProdutos" class="tabelaInventario">
          <thead>
            <tr class="tabelaCabecalho">
              <th>ID</th>
              <th>Nome</th>
              <th>Tipo</th>
              <th>Código Original</th>
              <th>Preço Base</th>
              <th>Marca</th>
              <th>Material</th>
              <th>Tamanho</th>
              <th>Cor</th>
              <th>Data Cadastro</th>
              <th>Quantidade</th>
              <th>Ações</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </section>

      <section id="operacoes" style="display: none">
        <div id="operacoes">
          <div id="caixaUsuario">
            <h2 class="paginaTitulo">Configurações</h2>
            <div id="operacoesSumario">
              <div class="sumarioEstado total">
                <span>Usuários Cadastrados</span>
                <strong>23</strong>
              </div>
            </div>
          </div>
        </div>

        <div id="controlesOperacoes">
          <button id="btnAbrirModalConfig" class="botaoPrimario">
            <img
              src="{{ url_for('static', filename='assets/icons/novo.svg') }}"
              alt="novo.svg"
            />Novos Usuários
          </button>
        </div>

        <table id="tabelaOperacoes">
          <thead>
            <tr class="configCabecalho">
              <th>Usuário</th>
              <th>Email</th>
              <th>Senha</th>
              <th>Status</th>
              <th>Ações</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </section>
    </main>

    <!-- Rodapé -->
    <footer>
      <p>Tudo no Controle © 2025 - Versão 3.0</p>
    </footer>

    <!-- Modal para o registro de novas vendas -->
    <dialog
      id="modalRegistroVenda"
      aria-labelledby="tituloModalVenda"
      aria-modal="true"
      role="dialog"
    >
      <form id="formRegistroVenda" method="POST">
        <div class="modalCabecalho">
          <h2 class="tituloModal">Registrar Venda</h2>
          <button
            type="button"
            aria-label="Fechar formulário"
            id="botaoFecharVenda"
            class="botaoFecharModal"
          >
            <img
              src="{{ url_for('static', filename='assets/icons/fechar.svg')}}"
              alt="fechar.svg"
            />
          </button>
        </div>

        <div class="grupoFormulario">
          <!-- Cliente -->
          <label for="clienteVenda">Cliente</label>
          <input
            type="text"
            id="clienteVenda"
            name="cliente"
            placeholder="Nome do cliente"
            required
          />

          <!-- Produto -->
          <label for="produtoVenda">Produto</label>
          <select id="produtoVenda" name="produto" required>
            <option value="" disabled selected>Selecione o produto</option>
            <!-- Produtos devem ser carregados dinamicamente -->
          </select>

          <!-- Quantidade -->
          <label for="quantidadeVenda">Quantidade</label>
          <input
            type="number"
            id="quantidadeVenda"
            name="quantidade"
            min="1"
            required
          />

          <!-- Preço unitário (preenchido automático ou editável) -->
          <label for="precoUnitarioVenda">Preço Unitário</label>
          <input
            type="number"
            id="precoUnitarioVenda"
            name="preco_unitario"
            step="0.01"
            min="0"
            required
          />

          <!-- Valor total (pode ser calculado) -->
          <label for="valorTotalVenda">Valor Total</label>
          <input
            type="number"
            id="valorTotalVenda"
            name="valor_total"
            step="0.01"
            min="0"
            readonly
          />

          <!-- Forma de pagamento -->
          <label for="formaPagamentoVenda">Forma de Pagamento</label>
          <select id="formaPagamentoVenda" name="forma_pagamento" required>
            <option value="" disabled selected>Selecione</option>
            <option value="dinheiro">Dinheiro</option>
            <option value="pix">PIX</option>
            <option value="cartao">Cartão</option>
            <option value="boleto">Boleto</option>
          </select>

          <!-- Data da venda -->
          <label for="dataVenda">Data da Venda</label>
          <input type="date" id="dataVenda" name="data_venda" required />
        </div>

        <menu>
          <button type="submit" class="botaoPrimario">Registrar Venda</button>
          <button type="button" id="botaoCancelarVenda" class="botaoSecundario">
            Cancelar
          </button>
        </menu>
      </form>
    </dialog>

    <!-- Modal para o cadastro de novos produtos -->
    <dialog id="modalCadastroProduto">
      <form id="formCadastroProduto" method="POST">
        <div class="modalCabecalho">
          <h2 class="tituloModal">Cadastrar / Editar Produto</h2>
          <button
            type="button"
            aria-label="Fechar formulário"
            id="botaoFecharModal"
            class="botaoFecharModal"
          >
            <img
              src="{{ url_for('static', filename='assets/icons/fechar.svg')}}"
              alt="fechar.svg"
            />
          </button>
        </div>

        <!-- Campos do Produto -->
        <label for="nomeProduto">Nome</label>
        <input
          type="text"
          id="nomeProduto"
          placeholder="Digite o nome do produto..."
          required
        />

        <label for="tipoProduto">Tipo de Produto</label>
        <select id="tipoProduto" required>
          <option value="" selected>Selecione</option>
          <option value="linha">Linha</option>
          <option value="tecido">Tecido</option>
          <option value="extra">Extra</option>
        </select>

        <label for="codigoProduto">Código</label>
        <input
          type="text"
          id="codigoProduto"
          placeholder="Digite o código do produto..."
          required
        />

        <label for="marcaProduto">Marca</label>
        <input type="text" id="marcaProduto" placeholder="Digite a marca..." />

        <label for="materialProduto">Material</label>
        <input
          type="text"
          id="materialProduto"
          placeholder="Digite o material..."
        />

        <label for="tamanhoProduto">Tamanho</label>
        <input
          type="text"
          id="tamanhoProduto"
          placeholder="Digite o tamanho..."
        />

        <label for="corProduto">Cor</label>
        <input type="text" id="corProduto" placeholder="Digite a cor..." />

        <label for="precoProduto">Preço Base</label>
        <input
          type="number"
          id="precoProduto"
          placeholder="Digite o preço base..."
          step="0.01"
          min="0"
          required
        />

        <label for="quantidadeProduto">Quantidade Inicial</label>
        <input
          type="number"
          id="quantidadeProduto"
          placeholder="Digite a quantidade inicial..."
          min="0"
        />

        <label for="dataCadastroProduto">Data de Cadastro</label>
        <input type="date" id="dataCadastroProduto" required />

        <menu>
          <button type="submit" class="botaoPrimario">Salvar</button>
          <button type="button" id="botaoCancelarModal">Cancelar</button>
        </menu>
      </form>
    </dialog>

    <!-- Modal de edição dos produtos -->
    <dialog id="modalEditarProduto">
      <form id="formEditarProduto" method="POST">
        <div class="modalCabecalho">
          <h2 class="tituloModal">Editar Produto</h2>
          <button
            type="button"
            aria-label="Fechar formulário"
            id="botaoFecharModalEditar"
            class="botaoFecharModal"
          >
            <img
              src="{{ url_for('static', filename='assets/icons/fechar.svg')}}"
              alt="fechar.svg"
            />
          </button>
        </div>

        <!-- Hidden para armazenar o ID do produto -->
        <input type="hidden" id="editarProdutoId" />

        <!-- Campos do Produto -->
        <label for="editarNomeProduto">Nome</label>
        <input
          type="text"
          id="editarNomeProduto"
          placeholder="Digite o nome do produto..."
          required
        />

        <label for="editarTipoProduto">Tipo de Produto</label>
        <select id="editarTipoProduto" disabled>
          <option value="">Selecione</option>
          <option value="linha">Linha</option>
          <option value="tecido">Tecido</option>
          <option value="extra">Extra</option>
        </select>

        <label for="editarCodigoProduto">Código</label>
        <input
          type="text"
          id="editarCodigoProduto"
          placeholder="Digite o código do produto..."
          required
        />

        <label for="editarMarcaProduto">Marca</label>
        <input
          type="text"
          id="editarMarcaProduto"
          placeholder="Digite a marca..."
        />

        <label for="editarMaterialProduto">Material</label>
        <input
          type="text"
          id="editarMaterialProduto"
          placeholder="Digite o material..."
        />

        <label for="editarTamanhoProduto">Tamanho</label>
        <input
          type="text"
          id="editarTamanhoProduto"
          placeholder="Digite o tamanho..."
        />

        <label for="editarCorProduto">Cor</label>
        <input
          type="text"
          id="editarCorProduto"
          placeholder="Digite a cor..."
        />

        <label for="editarPrecoProduto">Preço Base</label>
        <input
          type="number"
          id="editarPrecoProduto"
          placeholder="Digite o preço base..."
          step="0.01"
          min="0"
          required
        />

        <label for="editarQuantidadeProduto">Quantidade</label>
        <input
          type="number"
          id="editarQuantidadeProduto"
          placeholder="Digite a quantidade..."
          min="0"
        />

        <label for="editarDataCadastroProduto">Data de Cadastro</label>
        <input type="date" id="editarDataCadastroProduto" required />

        <menu>
          <button
            type="button"
            class="botaoPrimario"
            onclick="salvarEdicaoProduto()"
          >
            Salvar Alterações
          </button>
          <button type="button" id="botaoCancelarModalEditar">Cancelar</button>
        </menu>
      </form>
    </dialog>

    <div id="toastContainer" class="toast-container"></div>

    <script src="{{ url_for('static', filename='js/painelControle.js') }}"></script>
    <script src="{{ url_for('static', filename='js/graficos.js')}}"></script>
  </body>
</html>

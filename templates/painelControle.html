<!DOCTYPE html>
<html lang="pt-Br">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tudo no controle</title>
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/painelControle.css') }}"
    />
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/animacoesPainel.css') }}"
    />
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/painelControleRes.css') }}"
    />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  </head>
  <body>
    <!-- Cabeçalho -->
    <header>
      <div class="logo-container">
        <button id="acessoNav">
          <img
            src="{{ url_for('static', filename='assets/icons/menu.svg') }}"
            alt="menu.svg"
          />
        </button>
        <img
          id="logoIcone"
          src="{{ url_for('static', filename='assets/images/logoTdC.png') }}"
          alt="#"
        />
        <h1 id="tituloPrincipal">Tudo no Controle</h1>
      </div>
      <div class="perfilUsuario">
        <span class="nomeUsuario">Bem-vindo - {{ session['usuario'] }}</span>
      </div>
    </header>

    <!-- Barra de navegação -->
    <nav>
      <div class="navSessao">
        <div class="navTitulo">Principal</div>
        <a href="#" class="navLink ativo" data-destino="dashboard">
          <img
            src="{{ url_for('static', filename='assets/icons/dashboard.svg') }}"
            alt="dashboard"
          />
          <span>Dashboard</span>
        </a>
      </div>

      <div class="navSessao">
        <div class="navTitulo">Operacional</div>
        <a href="#" class="navLink" data-destino="compras">
          <img
            src="{{ url_for('static', filename='assets/icons/compras.svg') }}"
            alt="compras.svg"
          />
          <span>Compras</span>
        </a>
        <a href="#" class="navLink" data-destino="vendas">
          <img
            src="{{ url_for('static', filename='assets/icons/vendas.svg') }}"
            alt="vendas.svg"
          />
          <span>Vendas</span>
        </a>
        <a href="#" class="navLink" data-destino="inventario">
          <img
            src="{{ url_for('static', filename='assets/icons/estoque.svg') }}"
            alt="estoque.svg"
          />
          <span>Inventário</span>
        </a>
      </div>

      <button id="btnLogout">Sair</button>
    </nav>

    <!-- Conteúdo Principal -->
    <main>
      <!-- DashBoard-->
      <section id="dashboard">
        <div class="cabecalhoPagina">
          <h2 class="paginaTitulo">Dashboard</h2>
          <p class="subtitulo">Início / Dashboard</p>
        </div>
        <div class="dashboardGrid">
          <div class="cartao">
            <div class="cabecalhoCartao">
              <h3 class="tituloCartao">Vendas Hoje</h3>
              <div class="iconeCartao">
                <img
                  src="{{ url_for('static', filename='assets/icons/vendas.svg') }}"
                  alt="vendas.svg"
                />
              </div>
            </div>
            <div class="valorCartao">R$ 45.237,89</div>
            <div class="descricaoCartao">+12% em relação a ontem</div>
          </div>
          <div class="cartao">
            <div class="cabecalhoCartao">
              <h3 class="tituloCartao">Pedidos Pendentes</h3>
              <div class="iconeCartao">
                <img
                  src="{{ url_for('static', filename='assets/icons/alerta.svg') }}"
                  alt="alerta.svg"
                />
              </div>
            </div>
            <div class="valorCartao">25</div>
            <div class="descricaoCartao">-2 desde ontem</div>
          </div>
          <div class="cartao">
            <div class="cabecalhoCartao">
              <h3 class="tituloCartao">Novos fornecedores</h3>
              <div class="iconeCartao">
                <img
                  src="{{ url_for('static', filename='assets/icons/pessoas.svg') }}"
                  alt="pessoas.svg"
                />
              </div>
            </div>
            <div class="valorCartao">14</div>
            <div class="descricaoCartao">+7 novos esta semana</div>
          </div>
        </div>

        <div class="dashboardGrid">
          <div class="graficos">
            <canvas id="chartContainer1" class="graficoContainer"></canvas>
          </div>
          <div class="graficos">
            <canvas id="chartContainer2" class="graficoContainer"></canvas>
          </div>
          <div class="graficos">
            <canvas id="chartContainer3" class="graficoContainer"></canvas>
          </div>
        </div>
      </section>

      <!-- Compras -->
      <section id="compras" style="display: none">
        <div id="comprasCabecalho">
          <h2 class="paginaTitulo">Compras</h2>
        </div>

        <div id="controlesCompras">
          <button id="btnAbrirModalCompra" class="botaoPrimario">
            <img
              src="{{ url_for('static', filename='assets/icons/novo.svg') }}"
              alt="novo.svg"
            />Nova Compra
          </button>
          <div class="pesquisasModulos">
            <input
              type="text"
              placeholder="Buscar por fornecedor ou código..."
              id="filtroCompras"
              class="p"
            />
            <button class="pesquisaBotao">
              <img
                src="{{ url_for('static', filename='assets/icons/pesquisar.svg') }}"
                alt="pesquisar.svg"
              />
            </button>
          </div>
          <div class="filtrarOpcoes">
            <select class="filtroSelecionar">
              <option value="">Todos os status</option>
              <option value="pendente">Pendente</option>
              <option value="recebido">Recebido</option>
              <option value="cancelado">Cancelado</option>
            </select>
          </div>
        </div>

        <table id="tabelaCompras">
          <thead>
            <tr class="tabelaCabecalho">
              <th>Código</th>
              <th>Fornecedor</th>
              <th>Data</th>
              <th>Itens</th>
              <th>Total (R$)</th>
              <th>Status</th>
              <th>Ações</th>
            </tr>
          </thead>
          <tbody id="listaCompras">
            <tr class="linhaTabela">
              <td class="tabelaColuna">PROD001</td>
              <td class="tabelaColuna">Empresa Cardoso</td>
              <td class="tabelaColuna">20/06/2026</td>
              <td class="tabelaColuna">10 linhas</td>
              <td>R$9.000</td>
              <td class="tabelaColuna">
                <span class="itemEstado emEstoque">Recebido</span>
              </td>
              <td class="tabelaColuna acoes">
                <button class="botoesDecisao" title="Editar">
                  <img
                    src="{{ url_for('static', filename='assets/icons/editar.svg') }}"
                    alt="editar.svg"
                  />
                </button>
                <button class="botoesDecisao" title="Excluir">
                  <img
                    src="{{ url_for('static', filename='assets/icons/lixeira.svg') }}"
                    alt="lixeira.svg"
                  />
                </button>
              </td>
            </tr>
          </tbody>
        </table>
      </section>

      <!-- Vendas -->
      <section id="vendas" style="display: none">
        <div id="vendasCabecalho">
          <div id="caixaVendas">
            <h2 class="paginaTitulo">Vendas</h2>
            <div id="vendasSumario">
              <div class="sumarioEstado total">
                <span>Total Vendido Hoje</span>
                <strong>R$ 1.250,00</strong>
              </div>
              <div class="sumarioEstado realizadas">
                <span>Vendas Realizadas</span>
                <strong>287 vendas</strong>
              </div>
              <div class="sumarioEstado alerta">
                <span>Fiado Pendente</span>
                <strong>R$ 320,00</strong>
              </div>
            </div>
          </div>
        </div>

        <div id="controlesVendas">
          <button id="btnAbrirModalVenda" class="botaoPrimario">
            <img
              src="{{ url_for('static', filename='assets/icons/novo.svg') }}"
              alt="novo.svg"
            />Nova Venda
          </button>
          <div class="pesquisasModulos">
            <input
              type="text"
              placeholder="Buscar por fornecedor ou código..."
              id="filtroVendas"
              class="p"
            />
            <button class="pesquisaBotao">
              <img
                src="{{ url_for('static', filename='assets/icons/pesquisar.svg') }}"
                alt="pesquisaar.svg"
              />
            </button>
          </div>
          <div class="filtrarOpcoes">
            <select class="filtroSelecionar">
              <option value="">Todos os pagamentos</option>
              <option value="dinheiro">Dinheiro</option>
              <option value="cartao">Cartão</option>
              <option value="pix">PIX</option>
              <option value="fiado">Fiado</option>
            </select>
          </div>
          <div class="filtrarOpcoes">
            <select class="filtroSelecionar">
              <option value="">Todos os status</option>
              <option value="pendente">Pago</option>
              <option value="recebido">Pendente</option>
              <option value="cancelado">Cancelado</option>
            </select>
          </div>
        </div>

        <h3 class="tituloTabela">Vendas Registradas</h3>
        <table id="tabelaCompras">
          <thead>
            <tr class="tabelaCabecalho">
              <th>Código</th>
              <th>Fornecedor</th>
              <th>Data</th>
              <th>Itens</th>
              <th>Total (R$)</th>
              <th>Status</th>
              <th>Ações</th>
            </tr>
          </thead>
          <tbody id="listaCompras">
            <tr class="linhaTabela">
              <td class="tabelaColuna">PROD001</td>
              <td class="tabelaColuna">Empresa Cardoso</td>
              <td class="tabelaColuna">20/06/2026</td>
              <td class="tabelaColuna">10 linhas</td>
              <td>R$9.000</td>
              <td class="tabelaColuna">
                <span class="itemEstado emEstoque">Recebido</span>
              </td>
              <td class="tabelaColuna acoes">
                <button class="botoesDecisao" title="Editar">
                  <img
                    src="{{ url_for('static', filename='assets/icons/editar.svg') }}"
                    alt="editar.svg"
                  />
                </button>
                <button class="botoesDecisao" title="Excluir">
                  <img
                    src="{{ url_for('static', filename='assets/icons/lixeira.svg') }}"
                    alt="lixeira.svg"
                  />
                </button>
              </td>
            </tr>
          </tbody>
        </table>
      </section>

      <!-- Estoque -->
      <section id="inventario" style="display: none">
        <div id="inventarioCabecalho">
          <div id="caixaInventario">
            <h2 class="paginaTitulo">Inventário</h2>
            <div id="inventarioSumario">
              <div class="sumarioEstado total">
                <span>Produtos Totais</span>
                <strong>287</strong>
              </div>
              <div class="sumarioEstado alerta">
                <span>Baixo Estoque</span>
                <strong>23</strong>
              </div>
              <div class="sumarioEstado perigo">
                <span>Em Falta</span>
                <strong>6</strong>
              </div>
            </div>
          </div>
        </div>

        <div id="controlesInventario">
          <button id="btnAbrirModalEstoque" class="botaoPrimario">
            <img
              src="{{ url_for('static', filename='assets/icons/novo.svg') }}"
              alt="novo.svg"
            />Novo Produto
          </button>
          <div class="filtrarOpcoes">
            <select class="filtroSelecionar">
              <option>Todos Status</option>
              <option>Em Estoque</option>
              <option>Baixo Estoque</option>
              <option>Em Falta</option>
            </select>
          </div>
          <div class="pesquisasModulos">
            <input type="text" placeholder="Buscar produtos..." />
            <button class="pesquisaBotao">
              <img
                src="{{ url_for('static', filename='assets/icons/pesquisar.svg')}}"
                alt="pesquisar.svg"
              />
            </button>
          </div>
          <button class="botaoSecundario">
            <img src="" alt="" /> Exportar
          </button>
        </div>

        <h3 class="tituloTabela">Tabela de Linhas</h3>
        <table id="tabelaLinhas" class="tabelaInventario">
          <thead>
            <tr class="tabelaCabecalho">
              <th>Código</th>
              <th>Nome</th>
              <th>Marca</th>
              <th>Cor</th>
              <th>Código Cor</th>
              <th>Tipo</th>
              <th>Material</th>
              <th>Comprimento (m)</th>
              <th>Espessura</th>
              <th>Preço Base</th>
              <th>Data Cadastro</th>
              <th>Status</th>
              <th>Ações</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>

        <h3 class="tituloTabela">Tabela de Tecidos</h3>
        <table id="tabelaTecidos" class="tabelaInventario">
          <thead>
            <tr class="tabelaCabecalho">
              <th>Código</th>
              <th>Nome</th>
              <th>Marca</th>
              <th>Tipo</th>
              <th>Estampa</th>
              <th>Cor</th>
              <th>Largura (cm)</th>
              <th>Preço (R$/m)</th>
              <th>Composição</th>
              <th>Peso (g/m²)</th>
              <th>Data Cadastro</th>
              <th>Status</th>
              <th>Ações</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>

        <h3 class="tituloTabela">Tabela de Produtos Extras</h3>
        <table id="tabelaProdutosExtras" class="tabelaInventario">
          <thead>
            <tr class="tabelaCabecalho">
              <th>Código</th>
              <th>Nome</th>
              <th>Categoria</th>
              <th>Marca</th>
              <th>Cor</th>
              <th>Tamanho</th>
              <th>Material</th>
              <th>Preço Base</th>
              <th>Unidade Medida</th>
              <th>Data Cadastro</th>
              <th>Status</th>
              <th>Ações</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </section>
    </main>

    <!-- Rodapé -->
    <footer>
      <p>Tudo no Controle © 2025 - Versão 3.0</p>
    </footer>

    <!-- Modal para o registro de novas vendas -->
    <dialog
      id="modalRegistroVenda"
      aria-labelledby="tituloModalVenda"
      aria-modal="true"
      role="dialog"
    >
      <form id="formRegistroVenda" method="POST">
        <div class="modalCabecalho">
          <h2 class="tituloModal">Registrar Venda</h2>
          <button
            type="button"
            aria-label="Fechar formulário"
            id="botaoFecharVenda"
            class="botaoFecharModal"
          >
            <img
              src="{{ url_for('static', filename='assets/icons/fechar.svg')}}"
              alt="fechar.svg"
            />
          </button>
        </div>

        <div class="grupoFormulario">
          <!-- Cliente -->
          <label for="clienteVenda">Cliente</label>
          <input
            type="text"
            id="clienteVenda"
            name="cliente"
            placeholder="Nome do cliente"
            required
          />

          <!-- Produto -->
          <label for="produtoVenda">Produto</label>
          <select id="produtoVenda" name="produto" required>
            <option value="" disabled selected>Selecione o produto</option>
            <!-- Produtos devem ser carregados dinamicamente -->
          </select>

          <!-- Quantidade -->
          <label for="quantidadeVenda">Quantidade</label>
          <input
            type="number"
            id="quantidadeVenda"
            name="quantidade"
            min="1"
            required
          />

          <!-- Preço unitário (preenchido automático ou editável) -->
          <label for="precoUnitarioVenda">Preço Unitário</label>
          <input
            type="number"
            id="precoUnitarioVenda"
            name="preco_unitario"
            step="0.01"
            min="0"
            required
          />

          <!-- Valor total (pode ser calculado) -->
          <label for="valorTotalVenda">Valor Total</label>
          <input
            type="number"
            id="valorTotalVenda"
            name="valor_total"
            step="0.01"
            min="0"
            readonly
          />

          <!-- Forma de pagamento -->
          <label for="formaPagamentoVenda">Forma de Pagamento</label>
          <select id="formaPagamentoVenda" name="forma_pagamento" required>
            <option value="" disabled selected>Selecione</option>
            <option value="dinheiro">Dinheiro</option>
            <option value="pix">PIX</option>
            <option value="cartao">Cartão</option>
            <option value="boleto">Boleto</option>
          </select>

          <!-- Data da venda -->
          <label for="dataVenda">Data da Venda</label>
          <input type="date" id="dataVenda" name="data_venda" required />
        </div>

        <menu>
          <button type="submit" class="botaoPrimario">Registrar Venda</button>
          <button type="button" id="botaoCancelarVenda" class="botaoSecundario">
            Cancelar
          </button>
        </menu>
      </form>
    </dialog>

    <!-- Modal para o cadastro de novos produtos -->
    <dialog id="modalCadastroProduto">
      <form id="formCadastroProduto" method="POST">
        <div class="modalCabecalho">
          <h2 class="tituloModal">Cadastrar Produto</h2>
          <button
            type="button"
            aria-label="Fechar formulário"
            id="botaoFecharModal"
            class="botaoFecharModal"
          >
            <img
              src="{{ url_for('static', filename='assets/icons/fechar.svg')}}"
              alt="fechar.svg"
            />
          </button>
        </div>

        <!-- Tipo do Produto -->
        <label for="tipoProduto">Tipo de Produto</label>
        <select id="tipoProduto" required>
          <option value="" selected>Selecione</option>
          <option value="linha">Linha</option>
          <option value="tecido">Tecido</option>
          <option value="extra">Extras</option>
        </select>

        <!-- Linha -->
        <div class="grupoFormulario grupoTipo" id="formLinha" hidden>
          <h3 class="subtituloSecao">Informações do Produto: Linha</h3>

          <label for="codigoLinha">Código - Linha</label>
          <input
            type="text"
            id="codigoLinha"
            placeholder="Digite o código da linha..."
            required
          />

          <label for="codigoLinha">Nome</label>
          <input
            type="text"
            id="nomeLinha"
            placeholder="Digite o nome da linha..."
            required
          />

          <label for="marcaLinha">Marca</label>
          <input
            type="text"
            id="marcaLinha"
            placeholder="Digite a marca da linha..."
            required
          />

          <label for="corLinha">Cor</label>
          <input
            type="text"
            id="corLinha"
            placeholder="Digite a cor da linha..."
            required
          />

          <label for="codigoCor">Código - Cor</label>
          <input
            type="text"
            id="codigoCor"
            placeholder="Digite o código da cor da linha..."
            required
          />

          <label for="tipoLinha">Tipo da linha</label>
          <select id="tipoLinha" required>
            <option value="">Selecione o tipo da linha</option>
            <option value="costura">Costura</option>
            <option value="bordado">Bordado</option>
            <option value="croche">Crochê</option>
            <option value="trico">Tricô</option>
            <option value="outro">Outro</option>
          </select>

          <label for="materialLinha">Material da linha</label>
          <select id="materialLinha" required>
            <option value="">Selecione o material da linha</option>
            <option value="algodao">Algodão</option>
            <option value="poliester">Poliéster</option>
            <option value="misto">Misto</option>
            <option value="seda">Seda</option>
            <option value="outra">Outra</option>
          </select>

          <label for="comprimentoLinha">Comprimento</label>
          <input
            type="number"
            id="comprimentoLinha"
            min="0"
            placeholder="Digite o comprimento da linha..."
            required
          />

          <label for="espessuraLinha">Espessura</label>
          <input
            type="number"
            id="espessuraLinha"
            min="0"
            step="0.01"
            placeholder="Digite a espessura da linha..."
            required
          />

          <label for="precoUnitario">Preço unitário</label>
          <input
            type="number"
            id="precoBase"
            placeholder="Digite o preço unitário da linha..."
            step="0.01"
            min="0"
            required
          />

          <label for="dataCadastro">Data do cadastro</label>
          <input type="date" id="dataCadastroLinha" required />
        </div>

        <!-- Tecido -->
        <div class="grupoFormulario grupoTipo" id="formTecido" hidden>
          <h3 class="subtituloSecao">Informações do produto: Tecido</h3>

          <label for="codigoTecido">Código do Tecido</label>
          <input
            type="text"
            id="codigoTecido"
            placeholder="Digite o código do tecido..."
            required
          />

          <label for="nomeTecido">Nome</label>
          <input
            type="text"
            id="nomeTecido"
            placeholder="Digite o nome do tecido..."
            required
          />

          <label for="marcaTecido">Marca</label>
          <input
            type="text"
            id="marcaTecido"
            placeholder="Digite a marca do tecido..."
          />

          <label for="tipoTecido">Tipo do Tecido</label>
          <input
            type="text"
            id="tipoTecido"
            placeholder="Ex: Algodão, Linho, Seda..."
          />

          <label for="estampaTecido">Estampa</label>
          <input
            type="text"
            id="estampaTecido"
            placeholder="Ex: Liso, Floral, Listrado..."
          />

          <label for="corTecido">Cor</label>
          <input
            type="text"
            id="corTecido"
            placeholder="Digite a cor do tecido..."
          />

          <label for="larguraTecido">Largura (cm)</label>
          <input
            type="number"
            id="larguraTecido"
            placeholder="Digite a largura em cm..."
            step="0.01"
            min="0"
          />

          <label for="precoTecido">Preço por Metro</label>
          <input
            type="number"
            id="precoTecido"
            placeholder="Digite o preço por metro..."
            step="0.01"
            min="0"
          />

          <label for="composicaoTecido">Composição</label>
          <input
            type="text"
            id="composicaoTecido"
            placeholder="Ex: 100% Algodão, Poliéster + Algodão..."
          />

          <label for="pesoTecido">Peso (g/m²)</label>
          <input
            type="number"
            id="pesoTecido"
            placeholder="Digite o peso em g/m²..."
            step="1"
            min="0"
          />

          <label for="dataCadastroTecido">Data de Cadastro</label>
          <input type="date" id="dataCadastroTecido" required />
        </div>

        <!-- Produto Extra -->
        <div class="grupoFormulario grupoTipo" id="formExtra" hidden>
          <h3 class="subtituloSecao">Informações do produto: Extras</h3>

          <label for="codigoExtra">Código do Produto Extra</label>
          <input
            type="text"
            id="codigoExtra"
            placeholder="Digite o código do produto extra..."
            required
          />

          <label for="nomeExtra">Nome</label>
          <input
            type="text"
            id="nomeExtra"
            placeholder="Digite o nome do produto extra..."
            required
          />

          <label for="categoriaExtra">Categoria</label>
          <input
            type="text"
            id="categoriaExtra"
            placeholder="Ex: Botão, Zíper, Fita..."
          />

          <label for="marcaExtra">Marca</label>
          <input
            type="text"
            id="marcaExtra"
            placeholder="Digite a marca do produto extra..."
          />

          <label for="corExtra">Cor</label>
          <input
            type="text"
            id="corExtra"
            placeholder="Digite a cor do produto extra..."
          />

          <label for="tamanhoExtra">Tamanho</label>
          <input
            type="text"
            id="tamanhoExtra"
            placeholder="Digite o tamanho do produto extra..."
          />

          <label for="materialExtra">Material</label>
          <input
            type="text"
            id="materialExtra"
            placeholder="Ex: Metal, Plástico, Madeira..."
          />

          <label for="precoExtra">Preço Base</label>
          <input
            type="number"
            id="precoExtra"
            placeholder="Digite o preço base do produto extra..."
            step="0.01"
            min="0"
          />

          <label for="unidadeExtra">Unidade de Medida</label>
          <input
            type="text"
            id="unidadeExtra"
            placeholder="Ex: Unidade, Pacote, Metro..."
          />

          <label for="dataCadastroExtra">Data de Cadastro</label>
          <input type="date" id="dataCadastroExtra" required />
        </div>

        <menu>
          <button type="submit" class="botaoPrimario">Cadastrar</button>
          <button type="button" id="botaoCancelarModal">Cancelar</button>
        </menu>
      </form>
    </dialog>

    <div id="toastContainer" class="toast-container"></div>

    <script src="{{ url_for('static', filename='js/painelControle.js') }}"></script>
    <script src="{{ url_for('static', filename='js/graficos.js')}}"></script>
  </body>
</html>
